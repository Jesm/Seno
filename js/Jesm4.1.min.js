var Jesm=function(q,m){function z(a){"string"==typeof a&&(a=a.split(/ |,|;/));return a}function A(a,b,c){var d={};a=a.split(b);for(b=0;b<a.length;b++){var f=a[b],e=f.indexOf(c);d[f.substr(0,e)]=f.substr(e+1)}return d}function H(a,b){return function(){var c=this._super,d;this._super=a;d=b.apply(this,arguments);this._super=c;return d}}function I(a){return e.createClass(a,this)}function J(a){var b,c=3,d=[];(b=a.match(B))?c=1:(b=a.match(C))?c=2:b[1]=b[1].toUpperCase();a=this.childNodes;for(var f=0,e=
a.length;f<e;f++){var k=a[f],h;switch(c){case 1:h=k.className;h=null!=h&&-1!=h.indexOf(b[1])&&-1!=h.search(new RegExp("\\b"+b[1]+"\\b"));break;case 2:h=k.getAttribute(b[1])==b[2];break;default:h=k.tagName.toUpperCase()==b[1]}h&&d.push(k)}return d}function K(){this.parentNode.removeChild(this)}function D(a){a.pega=e.pega;a.filhas=J;a.del=K;a.classList||(a.classList=new L(a));return a}function M(){this.returnValue=!1}function N(){this.cancelBubble=!0}var r=!!q.addEventListener,E=r?"":"on",e={addEvento:function(a,
b,c,d,f){b=z(b);d=d||a;for(var g=r?"addEventListener":"attachEvent",k=function(a){r||e.Core.eventos.prepare(a);c.call(d,a)},h=0,l=b.length;h<l;h++)"wheel"!=b[h]||"onwheel"in q||(b[h]="onmousewheel"in m?"mousewheel":"MozMousePixelScroll"),a[g](E+b[h],k);if(f)return e.Core.eventos.add(a,b,k)},delEvento:function(a){if(a=e.Core.eventos.remove(a))for(var b=r?"removeEventListener":"detachEvent",c=a[1].length;c--;)a[0][b](E+a[1][c],a[2])},oldIE:function(){return null==m.documentElement.style.opacity},loadImgs:function(a,
b,c){c=1E3*(c||5);var d=0;(function g(){if(d==a.length)b&&b();else{var k=a[d++],h=setTimeout(g,c);e.loadImg(e.Cross.data(k,"src"),function(){clearTimeout(h);g()})}})()},loadImg:function(a,b,c){var d=new Image;d.onload=function(){c&&(c.src=this.src);b&&b.call(this)};d.src=a;return d},cada:function(a,b){for(var c=0,d=a.length,f;c<d&&(e.isElemento(f=a[c])&&e.pega(f),!1!==b(f,c,a));c++);},css:function(a,b){"string"==typeof b&&(b=A(b,";",":"));for(var c in b){var d=b[c];"opacity"==c&&e.oldIE()?(c="filter",
d="alpha(opacity="+100*parseFloat(d)+")"):"float"==c&&(c="cssFloat");"number"==typeof d&&(d+="px");a.style[e.cssPropToJs(c)]=d}return a},el:function(a,b,c,d){a=m.createElement(a);if(b){"string"==typeof b&&(b=A(b,";","="));for(var f in b){var g=b[f];"class"==f&&(f+="Name");a[f]=g}}c&&c.appendChild(a);null!=d&&(e.isElemento(d)?a.appendChild(d):a.innerHTML=d);return e.pega(a)},getAuto:function(a,b){var c=[a.style[b],a.style.display];e.css(a,b+":auto;display:block");var d=e.Cross.client(a);switch(b){case "width":d=
d[0];break;case "height":d=d[1]}e.css(a,b+":"+c[0]+";display:"+c[1]);return d},cssPropToJs:function(a){var b=/^-(.+)-(\w)/;b.test(a)&&(a=a.replace(b,function(a,b,f){return("moz"!=b?b:"Moz")+f.toUpperCase()}));return a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()})},escapeRegExp:function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},isElemento:function(a){return!(!a||1!==a.nodeType)},isFunction:function(a){return"function"==typeof a},isTouchEvent:function(a){return-1!=a.type.indexOf("touch")}};
e.createClass=function(){var a=!1;return function(b,c){var d=function(){this.__construct&&!a&&(this.__construct.apply(this,arguments),delete this.__construct)};d.extend=I;c&&(a=!0,d.prototype=new c,a=!1);var f=d.prototype,e;for(e in b)"function"==typeof b[e]&&(f[e]=f[e]?H(f[e],b[e]):b[e]);return d}}();var L=e.createClass({__construct:function(a){this._=a},contains:function(a){return(new RegExp("\\b"+a+"\\b")).test(this._.className)},add:function(a){-1==e.Cross.indexOf(this._.className.split(" "),
a)&&(this._.className+=" "+a)},remove:function(a){this._.className=this._.className.replace(new RegExp("\\b"+a+"\\b"),"")}}),B=/^\.(.+)$/i,C=/^\[(.+)=(.+)\]$/i,F=/%$/;e.pega=function(a,b){if(e.isElemento(a))return D(a);for(var c=e.isElemento(this)?this:m,d=a.split(/ *, */),f=[],g,k=0,h=d.length;k<h;k++){var l=d[k],p=[];if(g=l.match(/^#(.+)$/i)){p=m.getElementById(g[1]);if(1==d.length)return p?D(p):p;p=[p]}else if(g=l.match(B))var n=g[1],p=c.getElementsByClassName?c.getElementsByClassName(n):e.Cross.filter(c.getElementsByTagName("*"),
function(a){a=a.className;return-1!=a.indexOf(n)&&-1!=a.search(new RegExp("\\b"+n+"\\b"))});else p=(g=l.match(C))?c==m&&"name"==g[1]?m.getElementsByName(g[2]):e.Cross.filter(c.getElementsByTagName("*"),function(a){return a.getAttribute(g[1])==g[2]}):c.getElementsByTagName(l);for(var l=0,q=p.length;l<q;l++){var r=p[l];0>e.Cross.indexOf(f,r)&&f.push(r)}}null!=b&&("last"==b&&(b=f.length-1),f=f[b],e.isElemento(f)&&e.pega(f));return f};e.isFunction(q.pega)||(q.pega=e.pega);var u=!!q.requestAnimationFrame;
e.Core={ajax:{active:!1,limit:!1,queue:[],add:function(a){this.queue.push(a);this.limit&&this.active||(this.active=!0,this._sendNextRequest())},_sendNextRequest:function(){var a=this.queue.shift(),b=this;if(null==a)return this.active=!1;a[0].onreadystatechange=function(){4==this.readyState&&(a[2].handleResponse(this),b._sendNextRequest())};a[0].send(a[1])}},animator:{active:!1,queue:[],intervalo:13,addTarefa:function(a,b){this.queue.push([a,b]);if(!this.active){this.active=!0;var c=this._execTasks;
this.intervalRef=u?requestAnimationFrame(c):setInterval(c,this.intervalo)}return this},_execTasks:function(){var a=e.Core.animator;u&&(a.intervalRef=requestAnimationFrame(a._execTasks));for(var b=a.queue.length;b--;){var c=a.queue[b];c[0].call(c[1])&&a.delTarefaByIndice(b)}},delTarefaByObj:function(a){for(var b=this.queue.length;b--;)a==this.queue[b][1]&&this.delTarefaByIndice(b)},delTarefaByIndice:function(a){this.queue.splice(a,1);this.queue.length||this.stop()},stop:function(){this.active=!1;(u?
cancelAnimationFrame:clearInterval)(this.intervalRef)}},eventos:{refs:[],add:function(a,b,c){return this.refs.push([a,b,c])-1},remove:function(a){if(null!=this.refs[a]){var b=this.refs[a];delete this.refs[a];return b}},prepare:function(a){a.target=a.srcElement;a.which=a.keyCode;a.preventDefault=M;a.stopPropagation=N;return a}}};var v=["X","Y"],w=["Left","Top"];e.Cross={indexOf:function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},filter:function(a,
b){if(a.filter)return a.filter(b);for(var c=[],d=0,f=a.length,e;d<f;d++)b(e=a[d])&&c.push(e);return c},getStyle:function(a,b,c){var d;m.defaultView&&m.defaultView.getComputedStyle?d=m.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(d=a.currentStyle[e.cssPropToJs(b)]);c&&(d=parseFloat(d),isNaN(d)&&(d=0));return d},pageOffset:function(){var a=m.documentElement;return[q.pageXOffset||a.scrollLeft,q.pageYOffset||a.scrollTop]},inner:function(){for(var a=[],b=["Width","Height"],c=
2,d;c--;)d=b[c],a[c]=q["inner"+d]||Math.min(m.body["client"+d],m.documentElement["client"+d]);return a},scroll:function(a){for(var b=[],c=2;c--;)b[c]=a["scroll"+w[c]];return b},offset:function(a,b,c){a=a.getBoundingClientRect();c=c?[0,0]:this.pageOffset();a=[a.left,a.top];if(e.isElemento(b)){var d=this.scroll(b);b=this.offset(b);for(var f=2;f--;)c[f]+=d[f]-b[f]}for(f=2;f--;)a[f]+=c[f];return a},offsetSize:function(a){a=a||m.body;return[a.offsetWidth,a.offsetHeight]},client:function(a){return[a.clientWidth,
a.clientHeight]},cssSize:function(a){for(var b=[],c=["width","height"],d=["left","right","top","bottom"],f=this.client(a),e=2;e--;){var k=this.getStyle(a,c[e]);if("auto"==k||k.match(F))for(var k=f[e],h=2;h--;)k-=this.getStyle(a,"padding-"+d[2*e+h],!0);b[e]=parseFloat(k)}return b},textContent:function(a,b){for(var c,d=["textContent","innerText"],f=d.length;f--;)d[f]in a&&(c=d[f]);null!=b&&(a[c]=b);return a[c]},data:function(a,b,c){var d=!!a.dataset;d||(b="data-"+b);null!=c&&(d?a.dataset[b]=c:a.setAttribute(b,
c));return d?a.dataset[b]:a.getAttribute(b)},placeholder:function(){if(!("placeholder"in e.el("input")))for(var a=e.pega("input,textarea"),b=a.length;b--;){var c=a[b],d=c.getAttribute("placeholder");d&&!c.value&&(c.value=d)}},getMouse:function(a){for(var b=[],c=2;c--;)b[c]=a["client"+v[c]]||(a.touches?a.touches[0]["page"+v[c]]:0);return b},wheelDelta:function(a,b){b=v[null!=b?b:1];return a["delta"+b]||a["wheelDelta"+b]||a.wheelDelta||a.detail},requestFullScreen:function(a){return this.testFeat("requestFullScreen",
a,[a.ALLOW_KEYBOARD_INPUT])},cancelFullScreen:function(){return this.testFeat("cancelFullScreen",m)},testFeat:function(a,b,c){for(var d=b[a],f=a.replace(/^./,function(a){return a[0].toUpperCase()}),g=["webkit","moz","ms"],k=g.length;!d&&k--;)d=b[g[k]+f];if(e.isFunction(d))return b[a]=d,d.apply(b,c||[])}};e.Easer=new e.createClass({__construct:function(a,b,c,d){this.initialValue=a;this.finalValue=b;this.diff=b-a;this.duration=c;this.durationMs=1E3*+c;this.type=d},start:function(a){this.startTime=a||
+new Date;this.ready=!1;return this},gerar:function(a){this.duration&&(a=((a||+new Date)-this.startTime)/this.durationMs);if(!this.pass&&1<a)a=1;else switch(this.type){case "linear":break;case "ease-in":a=Math.pow(a,2);break;case "ease-out":a=Math.sqrt(a);break;default:a=Math.sin(Math.PI/2*a)}1==a&&(this.ready=!0);return a*this.diff+this.initialValue},isComplete:function(){return this.ready}});e.MoveCtxt=e.createClass({__construct:function(a){if(this._mode=e.isElemento(a))this._el=a},get:function(){return e.Cross[this._mode?
"scroll":"pageOffset"](this._el)},set:function(a){if(this._mode)for(var b=w.length;b--;)this._el["scroll"+w[b]]=a[b];else scroll(a[0],a[1])},size:function(){return e.Cross[this._mode?"client":"inner"](this._el)},scrollSize:function(){var a=this._mode?this._el:m.documentElement;return[a.scrollWidth,a.scrollHeight]}});e.Ir=e.createClass({__construct:function(a){this.active=!1;this.left=this.top=0;this.el=a;this._ctxt=new e.MoveCtxt(a)},to:function(a,b,c){this.active&&this.stop();this.active=!0;null==
b&&(console.error('"duration" argument was not set in Jesm.Ir.to call! Setting to 0...'),b=0);var d=[],f=[],g=this._ctxt,k=g.get(),h=g.size(),g=g.scrollSize();e.isElemento(a)&&(a=e.Cross.offset(a,this.el));for(var l=2,p=+new Date,n=["left","top"];l--;)d[l]=g[l]>h[l],f[l]=(new e.Easer(k[l],a[l]-this[n[l]],b,this.tipo)).start(p);this._execVars=[d,f,k,c];e.Core.animator.addTarefa(this._render,this)},_render:function(){for(var a=2,b=this._execVars,c=[],d=+new Date,f=2;f--;){var e=b[1][f];c[f]=b[0][f]?
e.gerar(d):b[2][f];c[f]&&!e.isComplete()||a--}this._ctxt.set(c);(a=!a)&&this._deactivate(!0);return a},_deactivate:function(a){this.active=!1;var b=this._execVars[3];delete this._execVars;a&&e.isFunction(b)&&b()},stop:function(a){e.Core.animator.delTarefaByObj(this);this._deactivate(a)}});var t="ja"+ +new Date,G=new RegExp(t,"g"),x="mm pt cm % em px".split(" "),O={none:function(){e.css(this.elemento,"display:none")},del:function(){e.pega(this.elemento).del()}};e.Anima=e.createClass({__construct:function(a,
b,c){if(!e.isElemento(a))throw"element argument of Jesm.Anima must be valid!";this.active=!1;this.elemento=a;this.tipo=c;this._isOldIE=e.oldIE();b=z(b);this._properties=[];c=0;for(var d=b.length;c<d;c++){var f=b[c];if(f){var g=!(this._isOldIE&&"opacity"==f);this._properties.push([g?f:"filter",g?null:"alpha(opacity="+t+")"]);g||""!=a.style.filter||e.css(a,"filter:alpha(opacity=100)")}}},addModelo:function(a,b,c){for(var d=this._properties.length;d--;){var e=this._properties[d];if(e[0]==a){e[1]=b.replace(new RegExp(c||
"\\(ja\\)","g"),t);break}}return this},go:function(a,b,c){this.active&&this.stop();this.active=!0;var d=this.elemento,f=[],g=!1;b instanceof Array||(b=[b]);for(var k=Math.min(this._properties.length,b.length);k--;){var h=b[k],l=this._properties[k],p=l[0],l=l[1],n=e.Cross.getStyle(d,p);if(!(-1<e.Cross.indexOf([h,n],null))){if("auto"==n){n=e.Cross.cssSize(d);switch(p){case "width":n=n[0];break;case "height":n=n[1];break;default:n=0}n+="px"}else n.match(F)&&(n="0px");if(null==l)for(var l=t,m=x.length;m--;)if(-1!=
n.search(x[m])){l+=x[m];break}m=e.escapeRegExp(l).replace(G,"([-+]?[0-9]*.?[0-9]+)");n=parseFloat(n.match(new RegExp(m))[1]);this._isOldIE&&"filter"==p?h*=100:"auto"==h&&(g=!0,h=e.getAuto(d,p));h=new e.Easer(n,h,a,this.tipo);f.push([e.cssPropToJs(p),l,h.start(),g])}}"string"==typeof c&&(c=O[c]);this._execVars=[f,c];e.Core.animator.addTarefa(this._render,this);return this},_render:function(){for(var a=this._execVars[0],b=a.length,c=this.elemento.style,d=b,e=+new Date;d--;){var g=a[d],k=g[2].gerar(e).toFixed(3);
c[g[0]]=g[1].replace(G,k);g[2].isComplete()&&b--}if(b=!b){for(d=a.length;d--;)g=a[d],g[3]&&(c[g[0]]="auto");this._deactivate(!0)}return b},_deactivate:function(a){this.active=!1;var b=this._execVars[1];delete this._execVars;a&&e.isFunction(b)&&b.call(this)},stop:function(a){e.Core.animator.delTarefaByObj(this);this._deactivate(a);return this}});e.Ajax=e.createClass({__construct:function(a,b,c){this.url=a;this.depois=b;this.metodo=c||"POST";this.onFail=null;this.data={};this.sendAsJSON=!1},go:function(){var a=
this.url,b=this.metodo.toUpperCase(),c=new XMLHttpRequest,d=encodeURIComponent,f,g;if(this.sendAsJSON)f=JSON.stringify(this.data),g="application/json;charset=UTF-8";else{f=[];for(var k in this.data){var h=this.data[k];h instanceof Array||(h=[null!=h?h+"":""]);for(var l=0;l<h.length;)f.push(d(k)+"="+d(h[l++]))}f=f.join("&");switch(b){case "GET":a+="?"+f;f=null;break;case "POST":g="application/x-www-form-urlencoded;charset=UTF-8"}}c.open(b,a);g&&c.setRequestHeader("Content-type",g);this.lastRequest=
c;e.Core.ajax.add([c,f,this]);return this},handleResponse:function(a){var b=200==a.status,c=this[b?"depois":"onFail"],d=this.text();if(e.isFunction(c)){var f=null;if(b)if("application/json"==a.getResponseHeader("Content-type"))try{f=JSON.parse(d)}catch(g){console.error("Error parsing JSON!"),console.log(g)}else f=d;c.call(this,f)}},text:function(){return this.lastRequest.responseText}});var P=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,Q=/^\-?[\d,\.]+$/i,R=["radio","checkbox"],y=["sending","success",
"alert"];e.Form=e.createClass({__construct:function(a,b){if(!e.isElemento(a))throw"element argument of Jesm.Form must be a valid element!";this.form=e.pega(a);this.notificationElement=a.pega(".jesm_form_notification",0);this.cfg=b||{};this._ir=new e.Ir(this.cfg.irContext);this._ir.top=15;this.defaultMessages={success:"Dados enviados com sucesso!",sending:"Enviando...",required:"Por favor, preencha este campo",email:"Por favor, forne\u00e7a um endere\u00e7o de email",number:"Por favor, forne\u00e7a um n\u00famero",
correct:"Por favor, corrija os dados e tente novamente"};this._evRef=e.addEvento(a,"submit",this._submit,this,!0);var c=this;this.callback=function(a){a&&(a.field&&c.display(c.defaultMessages.correct),c.display(a.success?"success":a.message,a.field,!0))};this.loadFields()},_submit:function(a){e.isFunction(this.callback)&&(a.preventDefault(),this.loadFields().validate()&&(this.send(this.callback),this.display("sending")))},loadFields:function(){for(var a={},b=this.form.elements,c=0,d=b.length;c<d;c++){var f=
b[c],g=f.name;if(g)if(a[g])a[g][0].push(f);else{for(var k=[[f]];(f=f.parentNode)&&f!=this.form;)if(e.pega(f).classList.contains("jesm_form_field")){k.push(f);var h=f.pega(".jesm_form_error",0);k.push(h||e.el("span","class=jesm_form_error",f));break}a[g]=k}}this._fields=a;return this},validate:function(){var a=!0,b=this._fields,c;c="_"+Math.random();c=this.form.getAttribute(c);for(var d in b){var e=b[d],g=e[0][0],k=g.value,h=g.getAttribute("type"),l=null;k.replace(" ","")||g.getAttribute("required")==
c?"email"!=h||P.test(k)?"number"!=h||Q.test(k)||(l="number"):l="email":l="required";l?(this.display(l,d,a),a=!1):e[1]&&e[1].classList.remove("alert")}return a},send:function(a){var b=this.form,c=this._fields;a=new e.Ajax(b.action,a,b.method);for(var d in c){for(var b=c[d][0],f=[],g=0,k=b.length;g<k;g++){var h=b[g];(-1==e.Cross.indexOf(R,h.getAttribute("type"))||h.checked)&&f.push(h.value)}a.data[d]=f}a.go();return this},display:function(a,b,c){var d=this.notificationElement;if(b){var f=this._fields[b];
f?(d=f[2],f[1].classList.add("alert"),c&&this._ir.to(f[1],.5)):console.error("Couldnt't find '"+b+"' in form fields. Verify the names of your inputs!")}else{b=d.classList;for(c=y.length;c--;)b.remove(y[c]);b.add(-1<e.Cross.indexOf(y,a)?a:"alert")}e.Cross.textContent(d,this.defaultMessages[a]||a)},dismount:function(){e.delEvento(this._evRef);delete this.form;delete this.notificationElement;delete this._fields}});return e}(window,document);